---
title: 操作系统内存管理功能
tags: 操作系统
category: CS大学生必备
date: 2020/04/04 14:06
---

操作系统是用户与计算机硬件之间的接口

<!--more-->

# 内存管理功能

## 内存分配

​       操作系统运行一个应用程序时，都是把它先放到内存中，然后CPU从内存中读指令、取数据**（指令和数据的地址都是逻辑地址）**。要装入首先要为它分配物理内存空间

## 内存保护

1.任何一个用户程序都不可以访问操作系统内核的程序。

2.同时驻留在内存空间的用户程序之间，是不可以互相干扰的，不可以随意访问对方的内存空间。

## 地址映射

 ①逻辑地址和物理地址
   一个应用程序经编译后，通常会形成若干个目标程序，这些目标程序再经过链接而形成可装入程序。这些程序的地址都是从**某一起始地址**开始的，程序中的其它地址都是相对于起始地址计算的；由这些地址所形成的地址范围称为“地址空间”，其中的地址称为“逻辑地址”。       
    由内存中的一系列单元所限定的地址范围称为“内存空间”，其中的地址称为“物理地址”。（物理内存条上的地址）

![](https://i.loli.net/2020/04/04/fnTyYWOlVCzBN7Q.png)

在编译时形成.o文件时会形成一个相对的逻辑地址，在链接的时候把多个.o文件拼接到一起后，对这个逻辑地址进行修改，修改成一个统一的逻辑地址，这时候就会形成在.exe的可执行程序里面的逻辑地址，这个逻辑地址将来是程序放到内存里去运行后，进行地址变换的时候，CPU用到的逻辑地址。

### CPU 指令划分

一条cpu指令分**操作码**、**操作数**两部分，根据操作数确定寻址方式：立即数、基址寻址、变址寻址等等，找到数据后送入cpu，根据操作码确定要进行什么样的操作。

### CPU执行指令的过程

计算机每执行一条指令都可分为三个阶段进行。即取指令-----分析指令-----执行指令。

取指令的任务是：根据程序计数器PC中的值从程序存储器读出现行指令，送到指令寄存器。

分析指令阶段的任务是：将指令寄存器中的指令操作码取出后进行译码，分析其指令性质。如指令要求操作数，则寻找操作数地址。

计算机执行程序的过程实际上就是逐条指令地重复上述操作过程，直至遇到停机指令可循环等待指令。

### CPU取址的时候进行地址转换

CPU取址的时候进行地址转换，如果取出来的一个指令包含一个内存地址这样的操作数，这个操作数里的地址也是逻辑地址，读这个操作数之前，必须把指令中的操作数的逻辑地址转换成物理地址，再到内存里去读这个数据。

- **指令的逻辑地址是放在PC寄存器里的**
- **数据的逻辑地址在指令中的操作码部分**

## 内存扩充

虚拟内存管理

## 内存回收

把某一个块内存区域定义为未用空间

